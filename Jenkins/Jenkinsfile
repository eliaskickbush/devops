node{
    docker.image('node:14').inside {
        stage('Test'){
            sh 'node --version'
        }
    }
    stage('Build Docker Image'){
        docker.withRegistry('docker.io', 'docker-leordas') {
            def customImage = docker.build("leordas/jenkins-test:${env.BUILD_NUMBER}", "./Jenkins")
            customImage.push()
        }    
    }
    stage('Deploy'){ 
        echo 'Deploying image...'
    }
    
}